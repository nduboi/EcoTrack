<% content_for :title, "Tableau de bord" %>

<div class="flex flex-col gap-8">
  <%# Message de bienvenue %>
  <div>
    <h1 class="text-3xl font-black">Bonjour, <%= current_user.name.presence || current_user.email %> ! ğŸ‘‹</h1>
    <p class="text-base-content/60">Voici un aperÃ§u de vos finances</p>
  </div>

  <%# Section des Stats %>
  <div class="stats stats-vertical lg:stats-horizontal shadow bg-base-100 border border-base-200 w-full">
    
    <%# Revenus %>
    <div class="stat">
      <div class="stat-figure text-success">
        <%= lucide_icon("trending-up", class: "size-8") %>
      </div>
      <div class="stat-title font-medium uppercase text-xs tracking-wider text-base-content/60">Revenus cumulÃ©s</div>
      <div class="stat-value text-success"><%= number_to_currency(@totalreceipe, unit: "â‚¬") %></div>
      <div class="stat-desc">Depuis le dÃ©but</div>
    </div>
    
    <%# DÃ©penses %>
    <div class="stat border-l border-base-200">
      <div class="stat-figure text-error">
        <%= lucide_icon("trending-down", class: "size-8") %>
      </div>
      <div class="stat-title font-medium uppercase text-xs tracking-wider text-base-content/60">DÃ©penses cumulÃ©es</div>
      <div class="stat-value text-error"><%= number_to_currency(@totalexpenses, unit: "â‚¬") %></div>
      <div class="stat-desc font-medium"><%= current_user.expenses.count %> transactions</div>
    </div>
    
    <%# Solde Net (Account) %>
    <div class="stat border-l border-base-200">
      <div class="stat-figure <%= @totalaccount >= 0 ? 'text-primary' : 'text-error' %>">
        <%= lucide_icon("wallet", class: "size-8") %>
      </div>
      <div class="stat-title font-medium uppercase text-xs tracking-wider text-base-content/60">Solde Actuel</div>
      <div class="stat-value <%= @totalaccount >= 0 ? 'text-primary' : 'text-error' %>">
        <%= number_to_currency(@totalaccount, unit: "â‚¬") %>
      </div>
      <div class="stat-desc font-semibold text-base-content/40">Wallet</div>
    </div>

  </div>

  <%# Boutons d'actions rapides %>
  <div class="flex flex-wrap gap-4">
    <%= link_to new_expense_path, class: "btn btn-outline btn-error gap-2" do %>
      <%= lucide_icon("minus-circle") %> Enregistrer une dÃ©pense
    <% end %>
    
    <%= link_to new_revenue_path, class: "btn btn-outline btn-success gap-2" do %>
      <%= lucide_icon("plus-circle") %> Enregistrer un revenu
    <% end %>
  </div>
</div>