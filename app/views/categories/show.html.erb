<div class="max-w-4xl mx-auto space-y-6">
  <div class="flex justify-between items-center">
    <%= link_to categories_path, class: "btn btn-ghost btn-sm gap-2" do %>
      <%= lucide_icon("arrow-left", class: "size-4") %> Retour
    <% end %>

    <div class="flex gap-2">
      <%= link_to edit_category_path(@category), class: "btn btn-sm btn-outline" do %>
        <%= lucide_icon("pencil", class: "size-4") %> Modifier
      <% end %>
      <%= button_to @category, method: :delete, class: "btn btn-sm btn-error btn-outline", data: { confirm: "Supprimer cette catégorie ?" } do %>
        <%= lucide_icon("trash-2", class: "size-4") %>
      <% end %>
    </div>
  </div>

  <div class="card bg-base-100 border border-base-200 shadow-sm">
    <div class="card-body">
      <h2 class="card-title text-3xl font-black text-secondary">
        <%= lucide_icon("folder-open", class: "size-8 text-secondary") %>
        <%= @category.nom %>
      </h2>
      <p class="text-base-content/60">Toutes les transactions associées à cette catégorie.</p>
    </div>
  </div>

  <div class="bg-base-100 rounded-xl border border-base-200 overflow-hidden shadow-sm">
    <table class="table table-zebra w-full">
      <thead>
        <tr class="bg-base-200/50">
          <th>Désignation</th>
          <th>Date</th>
          <th class="text-right">Montant</th>
        </tr>
      </thead>
      <tbody id="transactions">
        <% @transactions.each do |transaction| %>
          <% is_expense = transaction.is_a?(Expense) %>

          <tr class="hover">
            <td class="font-medium">
              <div class="flex items-center gap-3">
                <div class="p-2 rounded-lg <%= is_expense ? 'bg-error/10 text-error' : 'bg-success/10 text-success' %>">
                  <%= lucide_icon(is_expense ? "arrow-down-right" : "arrow-up-right", class: "size-4") %>
                </div>
                <%= transaction.respond_to?(:name) ? transaction.name : transaction.nom %>
              </div>
            </td>

            <td class="text-sm opacity-60">
              <%= transaction.date.strftime("%d/%m/%Y") %>
            </td>

            <td class="text-right font-bold <%= is_expense ? 'text-error' : 'text-success' %>">
              <%= is_expense ? "-" : "+" %> 
              <%= number_to_currency(is_expense ? transaction.montant : transaction.amount, unit: "€") %>
            </td>
          </tr>
        <% end %>

        <% if @transactions.empty? %>
          <tr><td colspan="3" class="text-center py-8 opacity-50 italic">Aucune transaction pour le moment</td></tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>